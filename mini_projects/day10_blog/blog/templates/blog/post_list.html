{% extends "blog/base.html" %}
{% block content %}
<h1>My Blog Posts</h1>
<form method="get" style="margin: 12px 0;">
    <input type="text" name="q" placeholder="Search title…" value="{{ request.GET.q }}">
    <input type="text" name="author" placeholder="Filter by author…" value="{{ request.GET.author }}">
    <button type="submit">Search</button>
</form>

{% for post in object_list %}
  <div class="card">
    <h2 style="margin:0 0 4px 0;"><a href="{% url 'post_detail' post.slug %}">{{ post.title }}</a></h2>
    <div class="muted">by {{ post.author }} — {{ post.created_at|date:"Y-m-d H:i" }}{% if post.updated_at and post.updated_at|date:"U" != post.created_at|date:"U" %} (updated){% endif %}</div>
    {% if post.cover %}
      <p><img class="img-cover" src="{{ post.cover.url }}" alt="cover"></p>
    {% endif %}
    <p>{{ post.content|truncatechars:140 }}</p>
  </div>
{% empty %}
  <p>No posts yet.</p>
{% endfor %}
{% endblock %}

